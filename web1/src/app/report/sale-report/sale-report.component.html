<section class="content">
    <div class="container-fluid">
        <div class="block-header">
            <div class="row clearfix">
                <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12 mt-0">
                    <div class="card p-0">
                        <div class="header p-2 py-0 pt-1">
                            <div class="row">
                                <div class="col-md-2 col-8 p-0 ms-3">
                                    <h2>Sale Report </h2>
                                </div>
                            </div>
                        </div>
                        <mat-tab-group>
                            <!-- Bill  -->
                            <mat-tab *ngIf="viewSaleReport" label="Sale">
                                <div class="body">
                                    <form class="p-3 pb-0" #f1="ngForm" (ngSubmit)="getBillMaster()">
                                        <div class="row">
                                            <div class="col-xl-2 col-lg-2 col-md-3 col-6 mb-0 ">
                                                <mat-form-field class="example-full-width mb-0">
                                                    <mat-label>Filter Types</mat-label>
                                                    <mat-select name="FilterTypes" [(ngModel)]="BillMaster.FilterTypes">
                                                        <mat-option value="BillDate">BillDate</mat-option>
                                                        <mat-option value="DeliveryDate">DeliveryDate</mat-option>
                                                    </mat-select>
                                                </mat-form-field>
                                            </div>
                                            <div class="col-xl-2 col-lg-2 col-md-3 col-6 mb-0 ">
                                                <mat-form-field class="example-full-width mb-0">
                                                    <mat-label>From</mat-label>
                                                    <input matInput name="FromDate" type="date"
                                                        (change)="getChangeDate()" [(ngModel)]="BillMaster.FromDate"
                                                        #DOBcontrol />
                                                </mat-form-field>
                                            </div>
                                            <div class="col-xl-2 col-lg-2 col-md-3 col-6 mb-0 ">
                                                <mat-form-field class="example-full-width mb-0">
                                                    <mat-label>To</mat-label>
                                                    <input matInput type="date" name="ToDate"
                                                        [(ngModel)]="BillMaster.ToDate"  />
                                                </mat-form-field>
                                            </div>
                                            <div class="col-xl-2 col-lg-2 col-md-3 col-6 mb-0 ">
                                                <mat-form-field class="example-full-width mb-0" *ngIf="user.UserGroup === 'CompanyAdmin'">
                                                    <mat-label>Shop Name</mat-label>
                                                    <mat-select name="shopID" [(ngModel)]="BillMaster.ShopID" multiple>
                                                        <mat-option [value]=0 >All</mat-option>
                                                        <mat-option [value]="s.ID" *ngFor="let s of shopList">
                                                            {{s.Name}}
                                                            <span [style.color]="'blue'"
                                                                *ngIf="s.AreaName !== 'null'">({{s.AreaName}})</span>
                                                        </mat-option>
                                                    </mat-select>
                                                </mat-form-field>
                                                <mat-form-field class="example-full-width mb-0" *ngIf="user.UserGroup !== 'CompanyAdmin'">
                                                    <mat-label>Shop Name</mat-label>
                                                    <mat-select name="shopID" [(ngModel)]="BillMaster.ShopID" >
                                                        <mat-option [value]="s.ID" *ngFor="let s of shopList">
                                                            {{s.Name}}
                                                            <span [style.color]="'blue'"
                                                                *ngIf="s.AreaName !== 'null'">({{s.AreaName}})</span>
                                                        </mat-option>
                                                    </mat-select>
                                                </mat-form-field>
                                            </div>
                                            <div class="col-xl-2 col-lg-2 col-md-3 col-6 mb-0 ">
                                                <mat-form-field class="example-full-width mb-0">
                                                    <mat-label>Employee Name</mat-label>
                                                    <mat-select name="Employee" [(ngModel)]="BillMaster.EmployeeID"
                                                        #Employeecontrol>
                                                        <mat-option [value]=0>All</mat-option>
                                                        <mat-option *ngFor="let el of employeeList let i = index;"
                                                            [value]="el.ID">
                                                            {{el.Name}}
                                                        </mat-option>
                                                    </mat-select>
                                                    <mat-error>Name is required</mat-error>
                                                </mat-form-field>
                                            </div>
                                            <div class="col-xl-2 col-lg-2 col-md-3 col-6 mb-0 ">
                                                <!-- <mat-form-field class="example-full-width mb-0">
                                                    <mat-label>Customer</mat-label>
                                                    <mat-select name="CustomerID" [(ngModel)]="BillMaster.CustomerID">
                                                        <mat-option [value]=0>All</mat-option>
                                                        <mat-option [value]="c.ID"
                                                            *ngFor="let c of customerList  let i = index;"> {{c.Name}}
                                                            <span style="float: right;">{{c.MobileNo1}} </span>
                                                        </mat-option>
                                                    </mat-select>
                                                </mat-form-field> -->
                                                    <mat-form-field class="example-full-width">
                                                      <mat-label>Customer</mat-label>
                                                      <input type="text" placeholder="serach customer" aria-label="Text" matInput
                                                      name="CustomerID"  [formControl]="myControl" [matAutocomplete]="auto" 
                                                             (input)="customerSearch(myControl.value, 'Name')">
                                                      <mat-autocomplete autoActiveFirstOption #auto="matAutocomplete" >
                                                        <mat-option (click)="CustomerSelection('All','0')" value='All'>All</mat-option>
                                                        <mat-option (click)="CustomerSelection('Value',option.ID)" *ngFor="let option of filteredOptions" [value]="option.Name">
                                                          {{option.Name}} {{option.MobileNo1}}
                                                        </mat-option>
                                                      </mat-autocomplete>
                                                    </mat-form-field>
                                            </div>
                                            <div class="col-xl-2 col-lg-2 col-md-3 col-6 mb-0 ">
                                                <mat-form-field class="example-full-width mb-0">
                                                    <mat-label>Customer GSTNo</mat-label>
                                                    <mat-select name="CustomerGSTNo"
                                                        [(ngModel)]="BillMaster.CustomerGSTNo">
                                                        <mat-option [value]=0>All</mat-option>
                                                        <mat-option [value]="c.GSTNumber"
                                                            *ngFor="let c of customerListGST let i = index;">
                                                            {{c.GSTNumber}}
                                                        </mat-option>
                                                    </mat-select>
                                                </mat-form-field>
                                            </div>
                                            <div class="col-xl-2 col-lg-2 col-md-3 col-6 mb-0 ">
                                                <mat-form-field class="example-full-width mb-0">
                                                    <mat-label>Payment Status</mat-label>
                                                    <mat-select name="PaymentStatus"
                                                        [(ngModel)]="BillMaster.PaymentStatus">
                                                        <mat-option [value]="0" *ngIf="this.employeeHide">All</mat-option>
                                                        <mat-option value="Paid" *ngIf="this.employeeHide">Paid</mat-option>
                                                        <mat-option value="Unpaid" *ngIf="!this.employeeHide">Unpaid</mat-option>
                                                        <mat-option value="Unpaid" *ngIf="this.employeeHide">Unpaid</mat-option>
                                                    </mat-select>
                                                </mat-form-field>
                                            </div>
                                            <div class="col-xl-2 col-lg-2 col-md-3 col-6 mb-0">
                                                <mat-form-field class="example-full-width mb-0">
                                                    <mat-label>Product Status</mat-label>
                                                    <mat-select name="ProductStatus"
                                                        [(ngModel)]="BillMaster.ProductStatus">
                                                        <mat-option value="All">All</mat-option>
                                                        <mat-option value="0">Pending</mat-option>
                                                        <mat-option value="1">Deliverd</mat-option>
                                                    </mat-select>
                                                </mat-form-field>
                                            </div>
                                            <div class="col-xl-2 col-lg-2 col-md-3 col-6 mb-0">
                                                <mat-form-field class="example-full-width mb-0">
                                                    <mat-label>Bill Type</mat-label>
                                                    <mat-select name="ProductStatus"
                                                        [(ngModel)]="BillMaster.BillType">
                                                        <mat-option value="All">All</mat-option>
                                                        <mat-option [value]=0>Service</mat-option>
                                                        <mat-option [value]=1>Invoice</mat-option>
                                                    </mat-select>
                                                </mat-form-field>
                                            </div>
                                            <div class="col-xl-2 col-lg-2 col-md-6 col-6 mb-0 ">
                                                <button type="submit" mat-raised-button color="primary">
                                                    Search
                                                </button>
                                                <button type="button" class=" ms-2 me-2" mat-raised-button color="warn"
                                                    (click)="billMasterFromReset()">
                                                    Reset
                                                </button>
                                                <!-- <button mat-raised-button color="primary"
                                                    printTitle="sale Report {{this.shopLists}}"
                                                    printSectionId="PurchasePDF" ngxPrint
                                                    styleSheetFile="../../../assets/pdf.css">
                                                    <i class="far fa-file-pdf "
                                                        style="color: #ffffff;font-size: 22px;cursor: pointer;"> </i>
                                                </button> -->
                                            </div>
                                        </div>
                                    </form>
                                    <!-- Purchase list -->
                                    <div class="body p-2">
                                        <div id="PurchasePDF" class="col-sm-12" style="overflow: auto; height: 450px;">
                                            <table class="table table-striped table-hover table-sm table-bordered"
                                                style="border: 2px solid #fff !important;" id="SaleExcel">
                                                <thead>
                                                    <tr style="white-space: nowrap;">
                                                        <th>S.No</th>
                                                        <th>InvoiceDate</th>
                                                        <th>InvoiceNo</th>
                                                        <th>CustomerName</th>
                                                        <th>MobileNo</th>
                                                        <th>PaymentStatus</th>
                                                        <th>Qty</th>
                                                        <th>Discount</th>
                                                        <th>SubTotal</th>
                                                        <th>GSTType</th>
                                                        <th>GSTAmount</th>
                                                        <th>CGSTAmt</th>
                                                        <th>SGSTAmt</th>
                                                        <th>IGSTAmt</th>
                                                        <th>GrandTotal</th>
                                                        <th>AddDiscount</th>
                                                        <th>Paid</th>
                                                        <th>Balance</th>
                                                        <th>ProductStatus</th>
                                                        <th>DeliveryDate</th>
                                                        <th>Cust_GSTNo</th>
                                                        <th>ShopName</th>
                                                    </tr>
                                                    <tr class="totolRow">
                                                        <td>
                                                            <i class="fa fa-file-excel-o excel" title="ExportAsXLSX"
                                                                aria-hidden="true" type="button"
                                                                (click)="exportAsXLSXMaster()">
                                                            </i>
                                                           
                                                            <button class="bg_none ms-4"
                                                            printTitle="sale Report {{this.shopLists}}"
                                                            printSectionId="PurchasePDF" ngxPrint
                                                            styleSheetFile="../../../assets/pdf.css">
                                                            <i class="far fa-file-pdf "
                                                                style="color: #1a1e90;font-size: 22px;cursor: pointer;"> </i>
                                                        </button>
                                                        </td>
                                                        <td></td>
                                                        <td></td>
                                                        <td></td>
                                                        <td></td>
                                                        <td></td>
                                                        <td>{{this.totalQty}}</td>
                                                        <td>{{this.totalDiscount}}</td>
                                                        <td>{{this.totalUnitPrice}}</td>
                                                        <td></td>
                                                        <td (click)="openModalSale(content3)">{{this.totalGstAmount}}
                                                        </td>
                                                        <td></td>
                                                        <td></td>
                                                        <td></td>
                                                        <td>{{this.totalAmount}}</td>
                                                        <td>{{this.totalAddlDiscount}}</td>
                                                        <td>{{this.totalPaid}}</td>
                                                        <td>{{this.totalBalance}}</td>
                                                        <td></td>
                                                        <td></td>
                                                        <td></td>
                                                        <td></td>

                                                    </tr>
                                                </thead>
                                                <tbody class="text-center">
                                                    <tr *ngFor="let d of BillMasterList; let i = index" text="left">

                                                        <td [ngClass]="{'my_class': d.PaymentStatus === 'Unpaid'}"> {{
                                                            i+1 }}
                                                        </td>
                                                        <td [ngClass]="{'my_class': d.PaymentStatus === 'Unpaid'}">
                                                            {{dateFormat(d.BillDate)}}</td>
                                                        <td [ngClass]="{'my_class': d.PaymentStatus === 'Unpaid'}"> {{
                                                            d.InvoiceNo}} </td>
                                                        <td [ngClass]="{'my_class': d.PaymentStatus === 'Unpaid'}"> {{
                                                            d.CustomerName }} </td>
                                                        <td [ngClass]="{'my_class': d.PaymentStatus === 'Unpaid'}"> {{
                                                            d.MobileNo1 }} </td>
                                                        <td [ngClass]="{'my_class': d.PaymentStatus === 'Unpaid'}"> {{
                                                            d.PaymentStatus }} </td>
                                                        <td [ngClass]="{'my_class': d.PaymentStatus === 'Unpaid'}"> {{
                                                            d.Quantity }} </td>
                                                        <td [ngClass]="{'my_class': d.PaymentStatus === 'Unpaid'}">
                                                            {{d.DiscountAmount }} </td>
                                                        <td [ngClass]="{'my_class': d.PaymentStatus === 'Unpaid'}"> {{
                                                            d.SubTotal }} </td>
                                                        <td [ngClass]="{'my_class': d.PaymentStatus === 'Unpaid'}">
                                                            {{d.GSTType}} </td>
                                                        <td [ngClass]="{'my_class': d.PaymentStatus === 'Unpaid'}"> {{
                                                            d.GSTAmount }} </td>
                                                        <td [ngClass]="{'my_class': d.PaymentStatus === 'Unpaid'}"
                                                            *ngIf="d.gst_detailssss[0][1].type === 'cGST-sGST'">
                                                            {{d.gst_detailssss[0][1].amt }}</td>
                                                        <td [ngClass]="{'my_class': d.PaymentStatus === 'Unpaid'}"
                                                            *ngIf="d.gst_detailssss[0][1].type === 'cGST-sGST'">
                                                            {{d.gst_detailssss[0][1].amt }}</td>
                                                        <td [ngClass]="{'my_class': d.PaymentStatus === 'Unpaid'}"
                                                            *ngIf="d.gst_detailssss[0][0].type === 'iGST'">
                                                            {{d.gst_detailssss[0][0].amt }}</td>
                                                        <td [ngClass]="{'my_class': d.PaymentStatus === 'Unpaid'}">
                                                            {{d.TotalAmount}} </td>
                                                        <td [ngClass]="{'my_class': d.PaymentStatus === 'Unpaid'}">
                                                            {{d.AddlDiscount }} </td>

                                                        <td [ngClass]="{'my_class': d.PaymentStatus === 'Unpaid'}">
                                                            {{(d.TotalAmount) - d.DueAmount }} </td>
                                                            
                                                        <td [ngClass]="{'my_class': d.PaymentStatus === 'Unpaid'}"> {{
                                                            d.DueAmount }} </td>

                                                        <td *ngIf="d.ProductStatus !== 'Pending' "
                                                            [ngClass]="{'my_class': d.PaymentStatus === 'Unpaid'}">
                                                            Deliverd </td>
                                                        <td *ngIf="d.ProductStatus === 'Pending'"
                                                            [ngClass]="{'my_class': d.PaymentStatus === 'Unpaid'}">
                                                            pending </td>
                                                        <td [ngClass]="{'my_class': d.PaymentStatus === 'Unpaid'}">
                                                            {{dateFormat(d.ProductDeliveryDate)}} </td>
                                                        <td [ngClass]="{'my_class': d.PaymentStatus === 'Unpaid'}">
                                                            {{d.GSTNo}} </td>
                                                        <td [ngClass]="{'my_class': d.PaymentStatus === 'Unpaid'}"> {{
                                                            d.ShopName }} <span [style.color]="'blue'"
                                                                *ngIf="d.AreaName !== 'null'">({{d.AreaName}})</span>
                                                        </td>
                                                    </tr>
                                                </tbody>
                                            </table>
                                        </div>
                                    </div>
                                </div>
                            </mat-tab>
                            <!-- Bill (Detailed) -->
                            <mat-tab *ngIf="viewSaleProductReport" label="Sale (Product Type)">
                                <div class="body">
                                    <form class="p-3 pb-0" #f1="ngForm" (ngSubmit)="getBillDetails()">
                                        <div class="row">
                                            <div class="col-xl-2 col-lg-2 col-md-3 col-6 mb-0 ">
                                                <mat-form-field class="example-full-width mb-0">
                                                    <mat-label>Filter Types</mat-label>
                                                    <mat-select name="FilterTypes" [(ngModel)]="Billdetail.FilterTypes">
                                                        <mat-option value="BillDate">BillDate</mat-option>
                                                        <mat-option value="DeliveryDate">DeliveryDate</mat-option>
                                                    </mat-select>
                                                </mat-form-field>
                                            </div>
                                            <div class="col-xl-2 col-lg-2 col-md-3 col-6 mb-0 ">
                                                <mat-form-field class="example-full-width mb-0">
                                                    <mat-label>From</mat-label>
                                                    <input matInput name="FromDate" type="date"
                                                        [(ngModel)]="Billdetail.FromDate" #DOBcontrol
                                                        [disabled]="!editSaleProductReport" />
                                                </mat-form-field>
                                            </div>
                                            <div class="col-xl-2 col-lg-2 col-md-3 col-6 mb-0 ">
                                                <mat-form-field class="example-full-width mb-0">
                                                    <mat-label>To</mat-label>
                                                    <input matInput type="date" name="ToDate"
                                                        [(ngModel)]="Billdetail.ToDate"
                                                        [disabled]="!editSaleProductReport" />
                                                </mat-form-field>
                                            </div>
                                            <div class="col-xl-2 col-lg-2 col-md-3 col-6 mb-0 ">
                                                <mat-form-field class="example-full-width mb-0" *ngIf="user.UserGroup === 'CompanyAdmin'" >
                                                    <mat-label>Shop Name</mat-label>
                                                    <mat-select name="shopID" [(ngModel)]="Billdetail.ShopID" multiple>
                                                        <mat-option [value]=0>All</mat-option>
                                                        <mat-option [value]="s.ID" *ngFor="let s of shopList">
                                                            {{s.Name}}
                                                            <span [style.color]="'blue'"
                                                                *ngIf="s.AreaName != 'null' || s.AreaName !== ''">({{s.AreaName}})</span>
                                                        </mat-option>
                                                    </mat-select>
                                                </mat-form-field>
                                         
                                                <mat-form-field class="example-full-width mb-0" *ngIf="user.UserGroup !== 'CompanyAdmin'">
                                                    <mat-label>Shop Name</mat-label>
                                                    <mat-select name="shopID" [(ngModel)]="Billdetail.ShopID" >
                                                        <mat-option [value]="s.ID" *ngFor="let s of shopList">
                                                            {{s.Name}}
                                                            <span [style.color]="'blue'"
                                                                *ngIf="s.AreaName !== 'null'">({{s.AreaName}})</span>
                                                        </mat-option>
                                                    </mat-select>
                                                </mat-form-field>
                                            </div>
                                            <div class="col-xl-2 col-lg-2 col-md-3 col-6 mb-0 ">
                                                <mat-form-field class="example-full-width mb-0">
                                                    <mat-label>Customer</mat-label>
                                                    <mat-select name="customerID" [(ngModel)]="Billdetail.CustomerID">
                                                        <mat-option [value]=0>All</mat-option>
                                                        <mat-option [value]="c.ID"
                                                            *ngFor="let c of customerList  let i = index;"> {{c.Name}}
                                                            <span style="float: right;">{{c.MobileNo1}} </span>
                                                        </mat-option>
                                                    </mat-select>
                                                </mat-form-field>
                                            </div>
                                            <div class="col-xl-2 col-lg-2 col-md-3 col-6 mb-0 ">
                                                <mat-form-field class="example-full-width mb-0">
                                                    <mat-label>Customer GSTNo</mat-label>
                                                    <mat-select name="CustomerGSTNo"
                                                        [(ngModel)]="Billdetail.CustomerGSTNo">
                                                        <mat-option [value]=0>All</mat-option>
                                                        <mat-option [value]="c.GSTNumber"
                                                            *ngFor="let c of customerListGST let i = index;">
                                                            {{c.GSTNumber}}
                                                        </mat-option>
                                                    </mat-select>
                                                </mat-form-field>
                                            </div>
                                            <div class="col-xl-2 col-lg-2 col-md-3 col-6 mb-0 ">
                                                <mat-form-field class="example-full-width mb-0">
                                                    <mat-label>Payment Status</mat-label>
                                                    <mat-select name="PaymentStatus"
                                                        [(ngModel)]="Billdetail.PaymentStatus">
                                                        <mat-option [value]="0">All</mat-option>
                                                        <mat-option value="Paid">Paid</mat-option>
                                                        <mat-option value="Unpaid">Unpaid</mat-option>
                                                    </mat-select>
                                                </mat-form-field>
                                            </div>
                                            <div class="col-xl-2 col-lg-2 col-md-3 col-6 mb-0 ">
                                                <mat-form-field class="example-full-width mb-0">
                                                    <mat-label>Product Status</mat-label>
                                                    <mat-select name="ProductStatus"
                                                        [(ngModel)]="Billdetail.ProductStatus">
                                                        <mat-option value="All">All</mat-option>
                                                        <mat-option value="0">Pending</mat-option>
                                                        <mat-option value="1">Deliverd</mat-option>
                                                    </mat-select>
                                                </mat-form-field>
                                            </div>
                                            <div class="col-xl-2 col-lg-2 col-md-3 col-6 mb-0">
                                                <mat-form-field class="example-full-width mb-0">
                                                    <mat-label>Select Product</mat-label>
                                                    <mat-select name="FieldType"
                                                        [(ngModel)]="Billdetail.ProductCategory"
                                                        (selectionChange)="getFieldList()" required #Typecontrol>
                                                        <mat-option [value]=0>All</mat-option>
                                                        <mat-option *ngFor="let prod of prodList   let i = index;"
                                                            [value]="prod.ID">
                                                            {{prod.Name | uppercase}}
                                                        </mat-option>
                                                    </mat-select>
                                                    <mat-error>
                                                        Select Product Type
                                                    </mat-error>
                                                </mat-form-field>
                                            </div>
                                            <!-- spec start -->
                                            <div class="col-xl-2 col-lg-2 col-md-3 col-6 mb-0"
                                                *ngFor="let spec of specList ; let i = index;">
                                                <div *ngIf="spec.FieldType === 'DropDown'" class="d-flex">
                                                    <mat-form-field class=" me-2 mb-0" *ngIf="spec.DisplayAdd === 0">
                                                        <mat-label>{{spec.FieldName}}</mat-label>
                                                        <mat-select name="{{spec.FieldName+'0'}}"
                                                            [(ngModel)]="spec.SelectedValue"
                                                            (selectionChange)="getFieldSupportData(i)" editable="true"
                                                            [required]="spec.Required === 1" #singleSelect>
                                                            <mat-option>
                                                            </mat-option>
                                                            <mat-option *ngFor="let val of spec.SptFilterData"
                                                                [value]="val.TableValue">
                                                                {{val.TableValue}}
                                                            </mat-option>
                                                        </mat-select>
                                                        <mat-error>
                                                            {{spec.FieldName}} is Required
                                                        </mat-error>
                                                    </mat-form-field>
                                                </div>
                                                <div *ngIf="spec.FieldType === 'Text'" class="d-flex">
                                                    <mat-form-field class=" mr-0 mb-0">
                                                        <mat-label>{{spec.FieldName}}</mat-label>
                                                        <input matInput name="{{spec.FieldName+'2'}}"
                                                            [(ngModel)]="spec.SelectedValue"
                                                            [required]="spec.Required === 1"
                                                            (blur)="getFieldSupportData(i)">
                                                        <mat-error>
                                                            {{spec.FieldName}} is Required
                                                        </mat-error>
                                                    </mat-form-field>
                                                </div>
                                                <div *ngIf="spec.FieldType === 'Date'" class="d-flex">
                                                    <mat-form-field class=" mr-0 mb-0">
                                                        <mat-label>{{spec.FieldName}}</mat-label>
                                                        <input type="date" matInput name="{{spec.FieldName+'3'}}"
                                                            [(ngModel)]="spec.SelectedValue" editable="true"
                                                            [required]="spec.Required === 1">
                                                        <mat-error>
                                                            {{spec.FieldName}} is Required
                                                        </mat-error>
                                                    </mat-form-field>
                                                </div>
                                                <div *ngIf="spec.FieldType === 'boolean'" class="d-flex">
                                                    <mat-slide-toggle name="{{spec.FieldName+'3'}}" color="primary"
                                                        class="example-margin" #Multiplecontrolx
                                                        [(ngModel)]="spec.SelectedValue">
                                                        {{spec.FieldName}}</mat-slide-toggle>
                                                </div>
                                            </div>
                                            <div *ngIf="this.Billdetail.ProductCategory === 'LENS'"
                                                class="col-xl-2 col-lg-2 col-md-2 col-sm-12 mb-0">
                                                <mat-form-field class="example-full-width mb-0">
                                                    <mat-label>Option</mat-label>
                                                    <mat-select name="Option" [(ngModel)]="Billdetail.Option">
                                                        <mat-option [value]=0>All</mat-option>
                                                        <mat-option value="Full Glass">Full Lens</mat-option>
                                                        <mat-option value="Half Glass Left">Half Lens Left</mat-option>
                                                        <mat-option value="Half Glass Right">Half Lens
                                                            Right</mat-option>
                                                    </mat-select>
                                                </mat-form-field>
                                            </div>
                                            <!--  spec end -->
                                            <div class="col-xl-2 col-lg-2 col-md-3 col-6 mb-0">
                                                <mat-form-field class="example-full-width mb-0">
                                                    <mat-label>GST Type</mat-label>
                                                    <mat-select name="GSTType" [(ngModel)]="Billdetail.GSTType"
                                                        #singleSelect>
                                                        <mat-option [value]=0>All</mat-option>
                                                        <mat-option [value]="g.Name"
                                                            *ngFor="let g of gstList">{{g.Name}}
                                                        </mat-option>
                                                    </mat-select>
                                                </mat-form-field>
                                            </div>
                                            <div class="col-xl-2 col-lg-2 col-md-3 col-6 mb-0">
                                                <mat-form-field class="example-full-width mb-0">
                                                    <mat-label>GSTPercentage</mat-label>
                                                    <mat-select name="GSTPercentage"
                                                        [(ngModel)]="Billdetail.GSTPercentage">
                                                        <mat-option [value]=0>All</mat-option>
                                                        <mat-option value="12">12%</mat-option>
                                                        <mat-option value="18">18%</mat-option>
                                                    </mat-select>
                                                </mat-form-field>
                                            </div>
                                            <div class="col-xl-2 col-lg-2 col-md-3 col-6 mb-0">
                                                <mat-form-field class="example-full-width mb-0">
                                                    <mat-label>Status</mat-label>
                                                    <mat-select name="Status" [(ngModel)]="Billdetail.Status">
                                                        <mat-option [value]=0>All</mat-option>
                                                        <mat-option value="PreOrder">PreOrder</mat-option>
                                                        <mat-option value="Manual">Manual</mat-option>
                                                        <mat-option value="Barcode">Barcode</mat-option>
                                                    </mat-select>
                                                </mat-form-field>
                                            </div>
                                            <div class="col-xl-4 col-lg-4 col-md-6 col-12 mb-0 ">
                                                <button class="me-3" type="submit" mat-raised-button color="primary">
                                                    Search
                                                </button>
                                                <button type="button" mat-raised-button color="warn"
                                                    (click)="BillDetailsFromReset()">
                                                    Reset
                                                </button>
                                                <button class=" ms-3" mat-raised-button color="primary"
                                                    printTitle="Sale Product Report {{this.shopLists}}"
                                                    printSectionId="producttype" ngxPrint
                                                    styleSheetFile="../../../assets/pdf.css">
                                                    <i class="far fa-file-pdf "
                                                        style="color: #ffffff;font-size: 22px;cursor: pointer;"> </i>
                                                </button>
                                            </div>
                                        </div>
                                    </form>
                                    <!-- Purchase Detailed list -->
                                    <div class="body p-2">
                                        <div id="producttype" class="col-sm-12" style="overflow: auto; height: 450px;">
                                            <table class="table table-striped table-hover table-sm table-bordered"
                                                style="border: 2px solid #fff !important;" id="saleDetailExcel">
                                                <thead>
                                                    <tr class="text-center" style="white-space: normal;">
                                                        <th>S.No</th>
                                                        <th>InvoiceDate</th>
                                                        <th>DeliveryDate</th>
                                                        <th>InvoiceNo</th>
                                                        <th>Customer Name</th>
                                                        <th>MobileNo</th>
                                                        <th>ProductType Name</th>
                                                        <th>Option</th>
                                                        <th>HSNCode</th>
                                                        <th>Product Name</th>
                                                        <th>Unit Price</th>
                                                        <th>Quantity</th>
                                                        <th>Discount Amount</th>
                                                        <th>Sub Total</th>
                                                        <th>GST Type</th>
                                                        <th>GST%</th>
                                                        <th>GST Amount</th>
                                                        <th style="display: none;"> CGST%</th>
                                                        <th style="display: none;"> CGSTAmt</th>
                                                        <th style="display: none;"> SGST%</th>
                                                        <th style="display: none;"> SGSTAmt</th>
                                                        <th style="display: none;"> IGST%</th>
                                                        <th style="display: none;"> IGSTAmt</th>
                                                        <th>Grand Total</th>
                                                        <th>Barcode</th>
                                                        <th>Payment Status</th>
                                                        <th>Product Status</th>
                                                        <th>Product DeliveryDate</th>
                                                        <th>Cust_GSTNo</th>
                                                        <th>Status</th>
                                                        <th>Shop Name</th>
                                                        <th *ngIf="user.UserGroup === 'CompanyAdmin'">PurchasePrice</th>
                                                        <th *ngIf="user.UserGroup === 'CompanyAdmin'">Profit</th>
                                                    </tr>
                                                    <tr class="totolRow"
                                                        *ngIf="this.DetailtotalQty != null && this.DetailtotalQty != '' ">
                                                        <td>
                                                            <i class="fa fa-file-excel-o excel" title="ExportAsXLSX"
                                                                aria-hidden="true" type="button"
                                                                (click)="exportAsXLSXDetail()">
                                                            </i>

                                                        </td>
                                                        <td></td>
                                                        <td></td>
                                                        <td></td>
                                                        <td></td>
                                                        <td></td>
                                                        <td></td>
                                                        <td></td>
                                                        <td></td>
                                                        <td></td>
                                                        <td></td>
                                                        <td>{{this.DetailtotalQty}}</td>
                                                        <td>{{this.DetailtotalDiscount}}</td>
                                                        <td>{{this.DetailtotalUnitPrice}}</td>
                                                        <td></td>
                                                        <td></td>
                                                        <td (click)="openModalDetail(content)">
                                                            {{this.DetailtotalGstAmount}}</td>
                                                        <td style="display: none;"></td>
                                                        <td style="display: none;"></td>
                                                        <td style="display: none;"></td>
                                                        <td style="display: none;"></td>
                                                        <td style="display: none;"></td>
                                                        <td style="display: none;"></td>
                                                        <td>{{this.DetailtotalAmount}}</td>
                                                        <td></td>
                                                        <td></td>
                                                        <td></td>
                                                        <td></td>
                                                        <td></td>
                                                        <td></td>
                                                        <td></td>
                                                        <td *ngIf="user.UserGroup === 'CompanyAdmin'"></td>
                                                        <td *ngIf="user.UserGroup === 'CompanyAdmin'"></td>
                                                    </tr>
                                                </thead>
                                                <tbody class="text-center">
                                                    <tr *ngFor=" let t of BillDetailList; let i = index ">
                                                        <td [ngClass]="{'my_class': t.PaymentStatus === 'Unpaid'}">
                                                            {{BillDetailList.length-i }} </td>
                                                        <td [ngClass]="{'my_class': t.PaymentStatus === 'Unpaid'}">
                                                            {{dateFormat(t.BillDate)}}</td>
                                                        <td [ngClass]="{'my_class': t.PaymentStatus === 'Unpaid'}">
                                                            {{dateFormat(t.DeliveryDate)}}</td>
                                                        <td [ngClass]="{'my_class': t.PaymentStatus === 'Unpaid'}">
                                                            {{t.BillInvoiceNo}}</td>
                                                        <td [ngClass]="{'my_class': t.PaymentStatus === 'Unpaid'}">
                                                            {{t.CustomerName}}</td>
                                                        <td [ngClass]="{'my_class': t.PaymentStatus === 'Unpaid'}">
                                                            {{t.CustomerMoblieNo1}}</td>
                                                        <td [ngClass]="{'my_class': t.PaymentStatus === 'Unpaid'}">
                                                            {{t.ProductTypeName}}</td>
                                                        <td [ngClass]="{'my_class': t.PaymentStatus === 'Unpaid'}">{{
                                                            (t.Optionsss !== 'null')? t.Optionsss: '-'}}</td>
                                                        <td [ngClass]="{'my_class': t.PaymentStatus === 'Unpaid'}">
                                                            {{t.HSNCode}}</td>
                                                        <td [ngClass]="{'my_class': t.PaymentStatus === 'Unpaid'}">
                                                            {{t.ProductName}}</td>
                                                        <td [ngClass]="{'my_class': t.PaymentStatus === 'Unpaid'}">
                                                            {{t.UnitPrice }}</td>
                                                        <td [ngClass]="{'my_class': t.PaymentStatus === 'Unpaid'}">
                                                            {{t.Quantity }}</td>
                                                        <td [ngClass]="{'my_class': t.PaymentStatus === 'Unpaid'}">
                                                            {{t.DiscountAmount }}</td>
                                                        <td [ngClass]="{'my_class': t.PaymentStatus === 'Unpaid'}">
                                                            {{t.SubTotal }}</td>
                                                        <td [ngClass]="{'my_class': t.PaymentStatus === 'Unpaid'}">
                                                            {{t.GSTType}}</td>
                                                        <td [ngClass]="{'my_class': t.PaymentStatus === 'Unpaid'}">
                                                            {{t.GSTPercentage}}</td>
                                                        <td [ngClass]="{'my_class': t.PaymentStatus === 'Unpaid'}">
                                                            {{t.GSTAmount }}</td>
                                                        <td style="display: none;"
                                                            [ngClass]="{'my_class': t.PaymentStatus === 'Unpaid'}"><span
                                                                *ngIf="t.GSTType === 'CGST-SGST'"> {{t.GSTPercentage/2}}
                                                            </span></td>
                                                        <td style="display: none;"
                                                            [ngClass]="{'my_class': t.PaymentStatus === 'Unpaid'}"><span
                                                                *ngIf="t.GSTType === 'CGST-SGST'"> {{t.GSTAmount/2}}
                                                            </span></td>
                                                        <td style="display: none;"
                                                            [ngClass]="{'my_class': t.PaymentStatus === 'Unpaid'}">
                                                            <span *ngIf="t.GSTType === 'CGST-SGST'">
                                                                {{t.GSTPercentage/2}} </span>
                                                        </td>
                                                        <td style="display: none;"
                                                            [ngClass]="{'my_class': t.PaymentStatus === 'Unpaid'}"><span
                                                                *ngIf="t.GSTType === 'CGST-SGST'"> {{t.GSTAmount/2}}
                                                            </span></td>
                                                        <td style="display: none;"
                                                            [ngClass]="{'my_class': t.PaymentStatus === 'Unpaid'}">
                                                            <span
                                                                *ngIf="t.GSTType === 'IGST'">{{t.GSTPercentage}}</span>
                                                        </td>
                                                        <td style="display: none;"
                                                            [ngClass]="{'my_class': t.PaymentStatus === 'Unpaid'}">
                                                            <span *ngIf="t.GSTType === 'IGST'">{{t.GSTAmount }}</span>
                                                        </td>
                                                        <td [ngClass]="{'my_class': t.PaymentStatus === 'Unpaid'}">
                                                            {{t.TotalAmount }}</td>
                                                        <td [ngClass]="{'my_class': t.PaymentStatus === 'Unpaid'}">
                                                            {{t.Barcode}}</td>
                                                        <td [ngClass]="{'my_class': t.PaymentStatus === 'Unpaid'}">{{
                                                            t.PaymentStatus }}</td>
                                                        <td *ngIf="t.ProductStatus === 1"
                                                            [ngClass]="{'my_class': t.PaymentStatus === 'Unpaid'}">
                                                            Deliverd </td>
                                                        <td *ngIf="t.ProductStatus === 0"
                                                            [ngClass]="{'my_class': t.PaymentStatus === 'Unpaid'}">
                                                            pending </td>
                                                        <td [ngClass]="{'my_class': t.PaymentStatus === 'Unpaid'}">
                                                            {{dateFormat(t.ProductDeliveryDate !== '0000-00-00' ?
                                                            t.ProductDeliveryDate: '-')}}</td>
                                                        <td [ngClass]="{'my_class': t.PaymentStatus === 'Unpaid'}">
                                                            {{t.GSTNo}}</td>
                                                        <td [ngClass]="{'my_class': t.PaymentStatus === 'Unpaid'}">
                                                            <span *ngIf="t.Manual === 1">Manual</span>
                                                            <span *ngIf="t.PreOrder === 1">PreOrder</span>
                                                            <span
                                                                *ngIf="t.PreOrder === 0 && t.Manual === 0">Stock</span>
                                                        </td>
                                                        <td [ngClass]="{'my_class': t.PaymentStatus === 'Unpaid'}"> {{
                                                            t.ShopName }} <span [style.color]="'blue'"
                                                                *ngIf="t.AreaName !== 'null'">({{t.AreaName}})</span>
                                                        </td>
                                                        <td *ngIf="user.UserGroup === 'CompanyAdmin'" [ngClass]="{'my_class': t.PaymentStatus === 'Unpaid'}">
                                                            {{t.PurchasePrice * t.Quantity  | number : '1.2-2'}}</td>

                                                        <td *ngIf="user.UserGroup === 'CompanyAdmin'" [ngClass]="{'my_class': t.PaymentStatus === 'Unpaid'}">
                                                            {{ t.SubTotal - t.PurchasePrice  * t.Quantity   | number : '1.2-2'}}</td>
                                                    </tr>
                                                </tbody>
                                            </table>
                                        </div>
                                    </div>
                                </div>
                            </mat-tab>
                            <!-- Sale Service -->
                            <mat-tab *ngIf="viewSaleServiceReport" label="Sale Service">
                                <div class="body">
                                    <form class="p-3 pb-0" #f="ngForm" (ngSubmit)="BillService()">
                                        <div class="row">
                                            <div class="col-xl-2 col-lg-2 col-md-2 col-6 mb-0">
                                                <mat-form-field class="example-full-width mb-0">
                                                    <mat-label>From Date</mat-label>
                                                    <input matInput name="FromDate" type="date"
                                                        [(ngModel)]="service.FromDate" #DOBcontrol
                                                        [disabled]="!editSaleServiceReport" />
                                                </mat-form-field>
                                            </div>
                                            <div class="col-xl-2 col-lg-2 col-md-2 col-6 mb-0">
                                                <mat-form-field class="example-full-width mb-0">
                                                    <mat-label>To Date</mat-label>
                                                    <input matInput name="ToDate" type="date"
                                                        [(ngModel)]="service.ToDate"
                                                        [disabled]="!editSaleServiceReport" />
                                                </mat-form-field>
                                            </div>
                                            <div class="col-xl-2 col-lg-2 col-md-4 col-12 mb-0 ">
                                                <mat-form-field class="example-full-width mb-0" *ngIf="user.UserGroup === 'CompanyAdmin'">
                                                    <mat-label>Shop Name</mat-label>
                                                    <mat-select name="shopID" [(ngModel)]="service.ShopID" multiple>
                                                        <mat-option [value]=0>All</mat-option>
                                                        <mat-option [value]="s.ID" *ngFor="let s of shopList">
                                                            {{s.Name}}
                                                            <span [style.color]="'blue'"
                                                                *ngIf="s.AreaName !== 'null'">({{s.AreaName}})</span>
                                                        </mat-option>
                                                    </mat-select>
                                                </mat-form-field>
                                                <mat-form-field class="example-full-width mb-0" *ngIf="user.UserGroup !== 'CompanyAdmin'">
                                                    <mat-label>Shop Name</mat-label>
                                                    <mat-select name="shopID" [(ngModel)]="service.ShopID" >
                                                        <mat-option [value]="s.ID" *ngFor="let s of shopList">
                                                            {{s.Name}}
                                                            <span [style.color]="'blue'"
                                                                *ngIf="s.AreaName !== 'null'">({{s.AreaName}})</span>
                                                        </mat-option>
                                                    </mat-select>
                                                </mat-form-field>
                                            </div>
                                            <div class="col-xl-2 col-lg-2 col-md-3 col-6 mb-0">
                                                <mat-form-field class="example-full-width mb-0">
                                                    <mat-label>Bill Type</mat-label>
                                                    <mat-select name="ProductStatus"
                                                        [(ngModel)]="service.BillType">
                                                        <mat-option value="All">All</mat-option>
                                                        <mat-option [value]=0>Service</mat-option>
                                                        <mat-option [value]=1>Invoice</mat-option>
                                                    </mat-select>
                                                </mat-form-field>
                                            </div>
                                            <div class="col-xl-4 col-lg-4 col-md-4 col-12 mb-0">
                                                <button class="me-1" mat-raised-button color="primary">Search</button>
                                                <button class="mr-0" type="button" mat-raised-button color="warn"
                                                    (click)="BillServiceFromReset()">Reset</button>
                                                <button class=" ms-1" mat-raised-button color="primary"
                                                    printTitle='Bill Service {{this.shopLists}}' [useExistingCss]="true"
                                                    printSectionId="Purchasecharge" ngxPrint>
                                                    <i class="far fa-file-pdf "
                                                        style="color: #ffffff;font-size: 22px;cursor: pointer;"> </i>
                                                </button>
                                            </div>
                                        </div>
                                    </form>
                                    <div class="body p-2">
                                        <div id="Purchasecharge" class="col-sm-12"
                                            style="overflow: auto; height: 450px;">
                                            <table class="table table-striped table-hover table-sm table-bordered"
                                                style="border: 2px solid #fff !important;" id="billServiceExcel">
                                                <thead>
                                                    <tr style="white-space: nowrap;">
                                                        <th>S.No</th>
                                                        <th>ShopName</th>
                                                        <th>CustomerName</th>
                                                        <th>MobileNo</th>
                                                        <th>BillDate</th>
                                                        <th>InvoiceNo</th>
                                                        <th>Description</th>
                                                        <th>SubTotal</th>
                                                        <th>GST Type</th>
                                                        <th>GST%</th>
                                                        <th style="display:none">IGST%</th>
                                                        <th style="display:none">IGSTAmt</th>
                                                        <th style="display:none">CGST%</th>
                                                        <th style="display:none">CGSTAmt</th>
                                                        <th style="display:none">SGST%</th>
                                                        <th style="display:none">SGSTAmt</th>
                                                        <th>GST Amount</th>
                                                        <th>GrandTotal</th>
                                                    </tr>
                                                    <tr class="totolRow text-center">
                                                        <td>
                                                            <i class="fa fa-file-excel-o excel" title="ExportAsXLSX"
                                                                aria-hidden="true" type="button"
                                                                (click)="exportAsXLSXcharge()">
                                                            </i>
                                                        </td>
                                                        <td></td>
                                                        <td></td>
                                                        <td></td>
                                                        <td></td>
                                                        <td></td>
                                                        <td></td>
                                                        <td>{{this.ServicetotalSUBTOTAL}}</td>
                                                        <td></td>
                                                        <td></td>
                                                        <td style="display:none"></td>
                                                        <td style="display:none"></td>
                                                        <td style="display:none"></td>
                                                        <td style="display:none"></td>
                                                        <td style="display:none"></td>
                                                        <td style="display:none"></td>
                                                        <td (click)="openModalService(content1)"> {{this.ServicetotalGstAmount}}</td>
                                                        <td>{{this.ServiceAmount}}</td>

                                                    </tr>
                                                </thead>
                                                <tbody class="text-center">
                                                    <tr *ngFor="let c of BillServiceList; let i = index" text="left">
                                                        <td> {{i+1 }} </td>
                                                        <td>{{c.ShopName}}<span [style.color]="'blue'"
                                                                *ngIf="c.AreaName !== 'null'">({{c.AreaName}})</span>
                                                        </td>
                                                        <td>{{c.CustomerName}}</td>
                                                        <td>{{c.MobileNo1}}</td>
                                                        <td>{{dateFormat(c.BillDate)}}</td>
                                                        <td>{{c.InvoiceNo}}</td>
                                                        <td>{{c.Description}}</td>
                                                        <td>{{c.SubTotal }}</td>
                                                        <td>{{c.GSTType}}</td>
                                                        <td>{{c.GSTPercentage}}</td>
                                                        <td style="display:none"> <span *ngIf="c.gst_detail[0]?.GSTType === 'IGST'"> {{c.GSTPercentage}}</span> </td>
                                                        <td style="display:none"> <span *ngIf="c.gst_detail[0]?.GSTType === 'IGST'"> {{c.gst_detail[0]?.Amount | number:'1.2-2'}}</span> </td>
                                                        <td style="display:none"> <span *ngIf="c.gst_detail[0]?.GSTType === 'CGST'"> {{c.GSTPercentage/2}}</span> </td>
                                                        <td style="display:none"> <span *ngIf="c.gst_detail[0]?.GSTType === 'CGST'"> {{c.gst_detail[0]?.Amount | number:'1.2-2'}}</span> </td>
                                                        <td style="display:none"> <span *ngIf="c.gst_detail[1]?.GSTType === 'SGST'"> {{c.GSTPercentage/2}}</span> </td>
                                                        <td style="display:none"> <span *ngIf="c.gst_detail[1]?.GSTType === 'SGST'"> {{c.gst_detail[0]?.Amount | number:'1.2-2'}}</span> </td>
                                                        <td>{{c.GSTAmount }}</td>
                                                        <td>{{c.Price }}</td>
                                                    </tr>
                                                </tbody>
                                            </table>
                                        </div>
                                    </div>
                                </div>
                            </mat-tab>
                            <!-- get Product Cancel -->
                            <mat-tab label="Product Cancel">
                                <div class="body">
                                    <form class="p-3 pb-0" #f1="ngForm" (ngSubmit)="getProductCancel()">
                                        <div class="row">
                                            <div class="col-xl-2 col-lg-2 col-md-3 col-6 mb-0 ">
                                                <mat-form-field class="example-full-width mb-0">
                                                    <mat-label>Filter Types</mat-label>
                                                    <mat-select name="FilterTypes" [(ngModel)]="cancel.FilterTypes">
                                                        <mat-option value="BillDate">BillDate</mat-option>
                                                        <mat-option value="DeliveryDate">DeliveryDate</mat-option>
                                                    </mat-select>
                                                </mat-form-field>
                                            </div>
                                            <div class="col-xl-2 col-lg-2 col-md-3 col-6 mb-0 ">
                                                <mat-form-field class="example-full-width mb-0">
                                                    <mat-label>From</mat-label>
                                                    <input matInput name="FromDate" type="date"
                                                        [(ngModel)]="cancel.FromDate" #DOBcontrol
                                                        [disabled]="!editSaleProductReport" />
                                                </mat-form-field>
                                            </div>
                                            <div class="col-xl-2 col-lg-2 col-md-3 col-6 mb-0 ">
                                                <mat-form-field class="example-full-width mb-0">
                                                    <mat-label>To</mat-label>
                                                    <input matInput type="date" name="ToDate"
                                                        [(ngModel)]="cancel.ToDate"
                                                        [disabled]="!editSaleProductReport" />
                                                </mat-form-field>
                                            </div>
                                            <div class="col-xl-2 col-lg-2 col-md-3 col-6 mb-0 ">
                                                <mat-form-field class="example-full-width mb-0" *ngIf="user.UserGroup === 'CompanyAdmin'">
                                                    <mat-label>Shop Name</mat-label>
                                                    <mat-select name="shopID" [(ngModel)]="cancel.ShopID" multiple>
                                                        <mat-option [value]=0>All</mat-option>
                                                        <mat-option [value]="s.ID" *ngFor="let s of shopList">
                                                            {{s.Name}}
                                                            <span [style.color]="'blue'"
                                                                *ngIf="s.AreaName !== 'null'">({{s.AreaName}})</span>
                                                        </mat-option>
                                                    </mat-select>
                                                </mat-form-field>
                                                <mat-form-field class="example-full-width mb-0" *ngIf="user.UserGroup !== 'CompanyAdmin'">
                                                    <mat-label>Shop Name</mat-label>
                                                    <mat-select name="shopID" [(ngModel)]="cancel.ShopID" >
                                                        <mat-option [value]="s.ID" *ngFor="let s of shopList">
                                                            {{s.Name}}
                                                            <span [style.color]="'blue'"
                                                                *ngIf="s.AreaName !== 'null'">({{s.AreaName}})</span>
                                                        </mat-option>
                                                    </mat-select>
                                                </mat-form-field>
                                            </div>
                                           
                                            <div class="col-xl-2 col-lg-2 col-md-3 col-6 mb-0 ">
                                                <mat-form-field class="example-full-width mb-0">
                                                    <mat-label>Customer GSTNo</mat-label>
                                                    <mat-select name="CustomerGSTNo"
                                                        [(ngModel)]="cancel.CustomerGSTNo">
                                                        <mat-option [value]=0>All</mat-option>
                                                        <mat-option [value]="c.GSTNumber"
                                                            *ngFor="let c of customerListGST let i = index;">
                                                            {{c.GSTNumber}}
                                                        </mat-option>
                                                    </mat-select>
                                                </mat-form-field>
                                            </div>
                                          
                                          
                                            <div class="col-xl-2 col-lg-2 col-md-3 col-6 mb-0">
                                                <mat-form-field class="example-full-width mb-0">
                                                    <mat-label>Select Product</mat-label>
                                                    <mat-select name="FieldType"
                                                        [(ngModel)]="cancel.ProductCategory"
                                                        (selectionChange)="getFieldList1()" required #Typecontrol>
                                                        <mat-option [value]=0>All</mat-option>
                                                        <mat-option *ngFor="let prod of prodList1   let i = index;"
                                                            [value]="prod.ID">
                                                            {{prod.Name | uppercase}}
                                                        </mat-option>
                                                    </mat-select>
                                                    <mat-error>
                                                        Select Product Type
                                                    </mat-error>
                                                </mat-form-field>
                                            </div>
                                            <!-- spec start -->
                                            <div class="col-xl-2 col-lg-2 col-md-3 col-6 mb-0"
                                                *ngFor="let spec of specList1 ; let i = index;">
                                                <div *ngIf="spec.FieldType === 'DropDown'" class="d-flex">
                                                    <mat-form-field class=" me-2 mb-0" *ngIf="spec.DisplayAdd === 0">
                                                        <mat-label>{{spec.FieldName}}</mat-label>
                                                        <mat-select name="{{spec.FieldName+'0'}}"
                                                            [(ngModel)]="spec.SelectedValue"
                                                            (selectionChange)="getFieldSupportData1(i)" editable="true"
                                                            [required]="spec.Required === 1" #singleSelect>
                                                            <mat-option>
                                                            </mat-option>
                                                            <mat-option *ngFor="let val of spec.SptFilterData"
                                                                [value]="val.TableValue">
                                                                {{val.TableValue}}
                                                            </mat-option>
                                                        </mat-select>
                                                        <mat-error>
                                                            {{spec.FieldName}} is Required
                                                        </mat-error>
                                                    </mat-form-field>
                                                </div>
                                                <div *ngIf="spec.FieldType === 'Text'" class="d-flex">
                                                    <mat-form-field class=" mr-0 mb-0">
                                                        <mat-label>{{spec.FieldName}}</mat-label>
                                                        <input matInput name="{{spec.FieldName+'2'}}"
                                                            [(ngModel)]="spec.SelectedValue"
                                                            [required]="spec.Required === 1"
                                                            (blur)="getFieldSupportData1(i)">
                                                        <mat-error>
                                                            {{spec.FieldName}} is Required
                                                        </mat-error>
                                                    </mat-form-field>
                                                </div>
                                                <div *ngIf="spec.FieldType === 'Date'" class="d-flex">
                                                    <mat-form-field class=" mr-0 mb-0">
                                                        <mat-label>{{spec.FieldName}}</mat-label>
                                                        <input type="date" matInput name="{{spec.FieldName+'3'}}"
                                                            [(ngModel)]="spec.SelectedValue" editable="true"
                                                            [required]="spec.Required === 1">
                                                        <mat-error>
                                                            {{spec.FieldName}} is Required
                                                        </mat-error>
                                                    </mat-form-field>
                                                </div>
                                                <div *ngIf="spec.FieldType === 'boolean'" class="d-flex">
                                                    <mat-slide-toggle name="{{spec.FieldName+'3'}}" color="primary"
                                                        class="example-margin" #Multiplecontrolx
                                                        [(ngModel)]="spec.SelectedValue">
                                                        {{spec.FieldName}}</mat-slide-toggle>
                                                </div>
                                            </div>
                                            <div *ngIf="this.cancel.ProductCategory === 'LENS'"
                                                class="col-xl-2 col-lg-2 col-md-2 col-sm-12 mb-0">
                                                <mat-form-field class="example-full-width mb-0">
                                                    <mat-label>Option</mat-label>
                                                    <mat-select name="Option" [(ngModel)]="cancel.Option">
                                                        <mat-option [value]=0>All</mat-option>
                                                        <mat-option value="Full Glass">Full Lens</mat-option>
                                                        <mat-option value="Half Glass Left">Half Lens Left</mat-option>
                                                        <mat-option value="Half Glass Right">Half Lens
                                                            Right</mat-option>
                                                    </mat-select>
                                                </mat-form-field>
                                            </div>
                                            <!--  spec end -->
                                            <div class="col-xl-2 col-lg-2 col-md-3 col-6 mb-0">
                                                <mat-form-field class="example-full-width mb-0">
                                                    <mat-label>GST Type</mat-label>
                                                    <mat-select name="GSTType" [(ngModel)]="cancel.GSTType"
                                                        #singleSelect>
                                                        <mat-option [value]=0>All</mat-option>
                                                        <mat-option [value]="g.Name"
                                                            *ngFor="let g of gstList">{{g.Name}}
                                                        </mat-option>
                                                    </mat-select>
                                                </mat-form-field>
                                            </div>
                                            <div class="col-xl-2 col-lg-2 col-md-3 col-6 mb-0">
                                                <mat-form-field class="example-full-width mb-0">
                                                    <mat-label>GSTPercentage</mat-label>
                                                    <mat-select name="GSTPercentage"
                                                        [(ngModel)]="cancel.GSTPercentage">
                                                        <mat-option [value]=0>All</mat-option>
                                                        <mat-option value="12">12%</mat-option>
                                                        <mat-option value="18">18%</mat-option>
                                                    </mat-select>
                                                </mat-form-field>
                                            </div>
                                            <div class="col-xl-2 col-lg-2 col-md-3 col-6 mb-0">
                                                <mat-form-field class="example-full-width mb-0">
                                                    <mat-label>Status</mat-label>
                                                    <mat-select name="Status" [(ngModel)]="cancel.Status">
                                                        <mat-option [value]=0>All</mat-option>
                                                        <mat-option value="PreOrder">PreOrder</mat-option>
                                                        <mat-option value="Manual">Manual</mat-option>
                                                        <mat-option value="Barcode">Barcode</mat-option>
                                                    </mat-select>
                                                </mat-form-field>
                                            </div>
                                            <div class="col-xl-2 col-lg-2 col-md-3 col-6 mb-0">
                                                <mat-form-field class="example-full-width mb-0">
                                                    <mat-label>Cancel/Delete Status</mat-label>
                                                    <mat-select name="Status" [(ngModel)]="cancel.CancelStatus">
                                                        <mat-option [value]=0>All</mat-option>
                                                        <mat-option value="Cancel">Cancel</mat-option>
                                                        <mat-option value="Delete">Delete</mat-option>
                                                    </mat-select>
                                                </mat-form-field>
                                            </div>
                                            <div class="col-xl-4 col-lg-4 col-md-6 col-12 mb-0 ">
                                                <button class="me-3" type="submit" mat-raised-button color="primary">
                                                    Search
                                                </button>
                                                <button type="button" mat-raised-button color="warn"
                                                    (click)="BillCancelFromReset()">
                                                    Reset
                                                </button>
                                                <button class=" ms-3" mat-raised-button color="primary"
                                                    printTitle="Sale Cancel Product Report {{this.shopLists}}"
                                                    printSectionId="productCanceltype" ngxPrint
                                                    styleSheetFile="../../../assets/pdf.css">
                                                    <i class="far fa-file-pdf "
                                                        style="color: #ffffff;font-size: 22px;cursor: pointer;"> </i>
                                                </button>
                                            </div>
                                        </div>
                                    </form>
                                    <!-- Purchase Detailed list -->
                                    <div class="body p-2">
                                        <div id="productCanceltype" class="col-sm-12" style="overflow: auto; height: 450px;">
                                            <table class="table table-striped table-hover table-sm table-bordered"
                                                style="border: 2px solid #fff !important;" id="saleCancelExcel">
                                                <thead>
                                                    <tr class="text-center" style="white-space: normal;">
                                                        <th>S.No</th>
                                                        <th>InvoiceDate</th>
                                                        <th>DeliveryDate</th>
                                                        <th>InvoiceNo</th>
                                                        <th>Customer Name</th>
                                                        <th>MobileNo</th>
                                                        <th>ProductType Name</th>
                                                        <th>Option</th>
                                                        <th>HSNCode</th>
                                                        <th>Product Name</th>
                                                        <th>Unit Price</th>
                                                        <th>Quantity</th>
                                                        <th>Discount Amount</th>
                                                        <th>Sub Total</th>
                                                        <th>GST Type</th>
                                                        <th>GST%</th>
                                                        <th>GST Amount</th>
                                                        <th style="display: none;"> CGST%</th>
                                                        <th style="display: none;"> CGSTAmt</th>
                                                        <th style="display: none;"> SGST%</th>
                                                        <th style="display: none;"> SGSTAmt</th>
                                                        <th style="display: none;"> IGST%</th>
                                                        <th style="display: none;"> IGSTAmt</th>
                                                        <th>Grand Total</th>
                                                        <th>Barcode</th>
                                                        <th>Payment Status</th>
                                                        <th>Product Status</th>
                                                        <th>Product DeliveryDate</th>
                                                        <th>Cust_GSTNo</th>
                                                        <th>Status</th>
                                                        <th>Cancel Status</th>
                                                    </tr>
                                                    <tr class="totolRow"
                                                        *ngIf="this.canceltotalQty != null && this.canceltotalQty != '' ">
                                                        <td>
                                                            <i class="fa fa-file-excel-o excel" title="ExportAsXLSX"
                                                                aria-hidden="true" type="button"
                                                                (click)="exportAsXLSXCancel()">
                                                            </i>

                                                        </td>
                                                        <td></td>
                                                        <td></td>
                                                        <td></td>
                                                        <td></td>
                                                        <td></td>
                                                        <td></td>
                                                        <td></td>
                                                        <td></td>
                                                        <td></td>
                                                        <td></td>
                                                        <td>{{this.canceltotalQty}}</td>
                                                        <td>{{this.canceltotalDiscount}}</td>
                                                        <td>{{this.canceltotalUnitPrice}}</td>
                                                        <td></td>
                                                        <td></td>
                                                        <td (click)="openModalCancel(content4)">
                                                            {{this.canceltotalGstAmount}}</td>
                                                        <td style="display: none;"></td>
                                                        <td style="display: none;"></td>
                                                        <td style="display: none;"></td>
                                                        <td style="display: none;"></td>
                                                        <td style="display: none;"></td>
                                                        <td style="display: none;"></td>
                                                        <td>{{this.canceltotalAmount}}</td>
                                                        <td></td>
                                                        <td></td>
                                                        <td></td>
                                                        <td></td>
                                                        <td></td>
                                                        <td></td>
                                                        <td></td>
                                                    </tr>
                                                </thead>
                                                <tbody class="text-center">
                                                    <tr *ngFor=" let t of cancelList; let i = index ">
                                                        <td [ngClass]="{'my_class': t.PaymentStatus === 'Unpaid'}">
                                                            {{cancelList.length-i }} </td>
                                                        <td [ngClass]="{'my_class': t.PaymentStatus === 'Unpaid'}">
                                                            {{dateFormat(t.BillDate)}}</td>
                                                        <td [ngClass]="{'my_class': t.PaymentStatus === 'Unpaid'}">
                                                            {{dateFormat(t.DeliveryDate)}}</td>
                                                        <td [ngClass]="{'my_class': t.PaymentStatus === 'Unpaid'}">
                                                            {{t.BillInvoiceNo}}</td>
                                                        <td [ngClass]="{'my_class': t.PaymentStatus === 'Unpaid'}">
                                                            {{t.CustomerName}}</td>
                                                        <td [ngClass]="{'my_class': t.PaymentStatus === 'Unpaid'}">
                                                            {{t.CustomerMoblieNo1}}</td>
                                                        <td [ngClass]="{'my_class': t.PaymentStatus === 'Unpaid'}">
                                                            {{t.ProductTypeName}}</td>
                                                        <td [ngClass]="{'my_class': t.PaymentStatus === 'Unpaid'}">{{
                                                            (t.Optionsss !== 'null')? t.Optionsss: '-'}}</td>
                                                        <td [ngClass]="{'my_class': t.PaymentStatus === 'Unpaid'}">
                                                            {{t.HSNCode}}</td>
                                                        <td [ngClass]="{'my_class': t.PaymentStatus === 'Unpaid'}">
                                                            {{t.ProductName}}</td>
                                                        <td [ngClass]="{'my_class': t.PaymentStatus === 'Unpaid'}">
                                                            {{t.UnitPrice }}</td>
                                                        <td [ngClass]="{'my_class': t.PaymentStatus === 'Unpaid'}">
                                                            {{t.Quantity }}</td>
                                                        <td [ngClass]="{'my_class': t.PaymentStatus === 'Unpaid'}">
                                                            {{t.DiscountAmount }}</td>
                                                        <td [ngClass]="{'my_class': t.PaymentStatus === 'Unpaid'}">
                                                            {{t.SubTotal }}</td>
                                                        <td [ngClass]="{'my_class': t.PaymentStatus === 'Unpaid'}">
                                                            {{t.GSTType}}</td>
                                                        <td [ngClass]="{'my_class': t.PaymentStatus === 'Unpaid'}">
                                                            {{t.GSTPercentage}}</td>
                                                        <td [ngClass]="{'my_class': t.PaymentStatus === 'Unpaid'}">
                                                            {{t.GSTAmount }}</td>
                                                        <td style="display: none;"
                                                            [ngClass]="{'my_class': t.PaymentStatus === 'Unpaid'}"><span
                                                                *ngIf="t.GSTType === 'CGST-SGST'"> {{t.GSTPercentage/2}}
                                                            </span></td>
                                                        <td style="display: none;"
                                                            [ngClass]="{'my_class': t.PaymentStatus === 'Unpaid'}"><span
                                                                *ngIf="t.GSTType === 'CGST-SGST'"> {{t.GSTAmount/2}}
                                                            </span></td>
                                                        <td style="display: none;"
                                                            [ngClass]="{'my_class': t.PaymentStatus === 'Unpaid'}">
                                                            <span *ngIf="t.GSTType === 'CGST-SGST'">
                                                                {{t.GSTPercentage/2}} </span>
                                                        </td>
                                                        <td style="display: none;"
                                                            [ngClass]="{'my_class': t.PaymentStatus === 'Unpaid'}"><span
                                                                *ngIf="t.GSTType === 'CGST-SGST'"> {{t.GSTAmount/2}}
                                                            </span></td>
                                                        <td style="display: none;"
                                                            [ngClass]="{'my_class': t.PaymentStatus === 'Unpaid'}">
                                                            <span
                                                                *ngIf="t.GSTType === 'IGST'">{{t.GSTPercentage}}</span>
                                                        </td>
                                                        <td style="display: none;"
                                                            [ngClass]="{'my_class': t.PaymentStatus === 'Unpaid'}">
                                                            <span *ngIf="t.GSTType === 'IGST'">{{t.GSTAmount }}</span>
                                                        </td>
                                                        <td [ngClass]="{'my_class': t.PaymentStatus === 'Unpaid'}">
                                                            {{t.TotalAmount }}</td>
                                                        <td [ngClass]="{'my_class': t.PaymentStatus === 'Unpaid'}">
                                                            {{t.Barcode}}</td>
                                                        <td [ngClass]="{'my_class': t.PaymentStatus === 'Unpaid'}">{{
                                                            t.PaymentStatus }}</td>
                                                        <td *ngIf="t.ProductStatus === 1"
                                                            [ngClass]="{'my_class': t.PaymentStatus === 'Unpaid'}">
                                                            Deliverd </td>
                                                        <td *ngIf="t.ProductStatus === 0"
                                                            [ngClass]="{'my_class': t.PaymentStatus === 'Unpaid'}">
                                                            pending </td>
                                                        <td [ngClass]="{'my_class': t.PaymentStatus === 'Unpaid'}">
                                                            {{dateFormat(t.ProductDeliveryDate) !== '0000-00-00' ?
                                                            t.ProductDeliveryDate: '-'}}</td>
                                                        <td [ngClass]="{'my_class': t.PaymentStatus === 'Unpaid'}">
                                                            {{t.GSTNo}}</td>
                                                        <td [ngClass]="{'my_class': t.PaymentStatus === 'Unpaid'}">
                                                            <span *ngIf="t.Manual === 1">Manual</span>
                                                            <span *ngIf="t.PreOrder === 1">PreOrder</span>
                                                            <span
                                                                *ngIf="t.PreOrder === 0 && t.Manual === 0">Stock</span>
                                                        </td>
                                                        <td [ngClass]="{'my_class': t.PaymentStatus === 'Unpaid'}">
                                                            <span *ngIf="t.Status === 1 && t.CancelStatus === 1">No Status</span>
                                                            <span *ngIf="t.Status === 0 && t.CancelStatus === 1">Delete</span>
                                                            <span
                                                                *ngIf="t.Status === 0 && t.CancelStatus === 0">CancelStatus</span>

                                                        </td>
                                                    </tr>
                                                </tbody>
                                            </table>
                                        </div>
                                    </div>
                                </div>
                            </mat-tab>
                            <!-- pending product  -->
                            <mat-tab label="Product Pending">
                                <div class="body">
                                    <form class="p-3 pb-0" #f1="ngForm" (ngSubmit)="getProductPending()">
                                        <div class="row">
                                            <div class="col-xl-2 col-lg-2 col-md-3 col-6 mb-0 ">
                                                <mat-form-field class="example-full-width mb-0">
                                                    <mat-label>Filter Types</mat-label>
                                                    <mat-select name="FilterTypes" [(ngModel)]="pending.FilterTypes">
                                                        <mat-option value="BillDate">BillDate</mat-option>
                                                        <mat-option value="DeliveryDate">DeliveryDate</mat-option>
                                                    </mat-select>
                                                </mat-form-field>
                                            </div>
                                            <div class="col-xl-2 col-lg-2 col-md-3 col-6 mb-0 ">
                                                <mat-form-field class="example-full-width mb-0">
                                                    <mat-label>From</mat-label>
                                                    <input matInput name="FromDate" type="date"
                                                        [(ngModel)]="pending.FromDate" #DOBcontrol
                                                        [disabled]="!editSaleProductReport" />
                                                </mat-form-field>
                                            </div>
                                            <div class="col-xl-2 col-lg-2 col-md-3 col-6 mb-0 ">
                                                <mat-form-field class="example-full-width mb-0">
                                                    <mat-label>To</mat-label>
                                                    <input matInput type="date" name="ToDate"
                                                        [(ngModel)]="pending.ToDate"
                                                        [disabled]="!editSaleProductReport" />
                                                </mat-form-field>
                                            </div>
                                            <div class="col-xl-2 col-lg-2 col-md-3 col-6 mb-0 ">
                                                <mat-form-field class="example-full-width mb-0" *ngIf="user.UserGroup === 'CompanyAdmin'">
                                                    <mat-label>Shop Name</mat-label>
                                                    <mat-select name="shopID" [(ngModel)]="pending.ShopID" multiple>
                                                        <mat-option [value]=0>All</mat-option>
                                                        <mat-option [value]="s.ID" *ngFor="let s of shopList">
                                                            {{s.Name}}
                                                            <span [style.color]="'blue'"
                                                                *ngIf="s.AreaName !== 'null'">({{s.AreaName}})</span>
                                                        </mat-option>
                                                    </mat-select>
                                                </mat-form-field>
                                                <mat-form-field class="example-full-width mb-0" *ngIf="user.UserGroup !== 'CompanyAdmin'">
                                                    <mat-label>Shop Name</mat-label>
                                                    <mat-select name="shopID" [(ngModel)]="pending.ShopID" >
                                                        <mat-option [value]="s.ID" *ngFor="let s of shopList">
                                                            {{s.Name}}
                                                            <span [style.color]="'blue'"
                                                                *ngIf="s.AreaName !== 'null'">({{s.AreaName}})</span>
                                                        </mat-option>
                                                    </mat-select>
                                                </mat-form-field>
                                            </div>
                                           
                                            <div class="col-xl-2 col-lg-2 col-md-3 col-6 mb-0 ">
                                                <mat-form-field class="example-full-width mb-0">
                                                    <mat-label>Customer GSTNo</mat-label>
                                                    <mat-select name="CustomerGSTNo"
                                                        [(ngModel)]="pending.CustomerGSTNo">
                                                        <mat-option [value]=0>All</mat-option>
                                                        <mat-option [value]="c.GSTNumber"
                                                            *ngFor="let c of customerListGST let i = index;">
                                                            {{c.GSTNumber}}
                                                        </mat-option>
                                                    </mat-select>
                                                </mat-form-field>
                                            </div>
                                          
                                          
                                            <div class="col-xl-2 col-lg-2 col-md-3 col-6 mb-0">
                                                <mat-form-field class="example-full-width mb-0">
                                                    <mat-label>Select Product</mat-label>
                                                    <mat-select name="FieldType"
                                                        [(ngModel)]="pending.ProductCategory"
                                                        (selectionChange)="getFieldList2()" required #Typecontrol>
                                                        <mat-option [value]=0>All</mat-option>
                                                        <mat-option *ngFor="let prod of prodList2   let i = index;"
                                                            [value]="prod.ID">
                                                            {{prod.Name | uppercase}}
                                                        </mat-option>
                                                    </mat-select>
                                                    <mat-error>
                                                        Select Product Type
                                                    </mat-error>
                                                </mat-form-field>
                                            </div>
                                            <!-- spec start -->
                                            <div class="col-xl-2 col-lg-2 col-md-3 col-6 mb-0"
                                                *ngFor="let spec of specList2 ; let i = index;">
                                                <div *ngIf="spec.FieldType === 'DropDown'" class="d-flex">
                                                    <mat-form-field class=" me-2 mb-0" *ngIf="spec.DisplayAdd === 0">
                                                        <mat-label>{{spec.FieldName}}</mat-label>
                                                        <mat-select name="{{spec.FieldName+'0'}}"
                                                            [(ngModel)]="spec.SelectedValue"
                                                            (selectionChange)="getFieldSupportData2(i)" editable="true"
                                                            [required]="spec.Required === 1" #singleSelect>
                                                            <mat-option>
                                                            </mat-option>
                                                            <mat-option *ngFor="let val of spec.SptFilterData"
                                                                [value]="val.TableValue">
                                                                {{val.TableValue}}
                                                            </mat-option>
                                                        </mat-select>
                                                        <mat-error>
                                                            {{spec.FieldName}} is Required
                                                        </mat-error>
                                                    </mat-form-field>
                                                </div>
                                                <div *ngIf="spec.FieldType === 'Text'" class="d-flex">
                                                    <mat-form-field class=" mr-0 mb-0">
                                                        <mat-label>{{spec.FieldName}}</mat-label>
                                                        <input matInput name="{{spec.FieldName+'2'}}"
                                                            [(ngModel)]="spec.SelectedValue"
                                                            [required]="spec.Required === 1"
                                                            (blur)="getFieldSupportData2(i)">
                                                        <mat-error>
                                                            {{spec.FieldName}} is Required
                                                        </mat-error>
                                                    </mat-form-field>
                                                </div>
                                                <div *ngIf="spec.FieldType === 'Date'" class="d-flex">
                                                    <mat-form-field class=" mr-0 mb-0">
                                                        <mat-label>{{spec.FieldName}}</mat-label>
                                                        <input type="date" matInput name="{{spec.FieldName+'3'}}"
                                                            [(ngModel)]="spec.SelectedValue" editable="true"
                                                            [required]="spec.Required === 1">
                                                        <mat-error>
                                                            {{spec.FieldName}} is Required
                                                        </mat-error>
                                                    </mat-form-field>
                                                </div>
                                                <div *ngIf="spec.FieldType === 'boolean'" class="d-flex">
                                                    <mat-slide-toggle name="{{spec.FieldName+'3'}}" color="primary"
                                                        class="example-margin" #Multiplecontrolx
                                                        [(ngModel)]="spec.SelectedValue">
                                                        {{spec.FieldName}}</mat-slide-toggle>
                                                </div>
                                            </div>
                                            <div *ngIf="this.pending.ProductCategory === 'LENS'"
                                                class="col-xl-2 col-lg-2 col-md-2 col-sm-12 mb-0">
                                                <mat-form-field class="example-full-width mb-0">
                                                    <mat-label>Option</mat-label>
                                                    <mat-select name="Option" [(ngModel)]="pending.Option">
                                                        <mat-option [value]=0>All</mat-option>
                                                        <mat-option value="Full Glass">Full Lens</mat-option>
                                                        <mat-option value="Half Glass Left">Half Lens Left</mat-option>
                                                        <mat-option value="Half Glass Right">Half Lens
                                                            Right</mat-option>
                                                    </mat-select>
                                                </mat-form-field>
                                            </div>
                                            <!--  spec end -->
                                            <div class="col-xl-2 col-lg-2 col-md-3 col-6 mb-0">
                                                <mat-form-field class="example-full-width mb-0">
                                                    <mat-label>GST Type</mat-label>
                                                    <mat-select name="GSTType" [(ngModel)]="pending.GSTType"
                                                        #singleSelect>
                                                        <mat-option [value]=0>All</mat-option>
                                                        <mat-option [value]="g.Name"
                                                            *ngFor="let g of gstList">{{g.Name}}
                                                        </mat-option>
                                                    </mat-select>
                                                </mat-form-field>
                                            </div>
                                            <div class="col-xl-2 col-lg-2 col-md-3 col-6 mb-0">
                                                <mat-form-field class="example-full-width mb-0">
                                                    <mat-label>GSTPercentage</mat-label>
                                                    <mat-select name="GSTPercentage"
                                                        [(ngModel)]="pending.GSTPercentage">
                                                        <mat-option [value]=0>All</mat-option>
                                                        <mat-option value="12">12%</mat-option>
                                                        <mat-option value="18">18%</mat-option>
                                                    </mat-select>
                                                </mat-form-field>
                                            </div>
                                            <div class="col-xl-2 col-lg-2 col-md-3 col-6 mb-0">
                                                <mat-form-field class="example-full-width mb-0">
                                                    <mat-label>Status</mat-label>
                                                    <mat-select name="Status" [(ngModel)]="pending.Status">
                                                        <mat-option [value]=0>All</mat-option>
                                                        <mat-option value="PreOrder">PreOrder</mat-option>
                                                        <mat-option value="Manual">Manual</mat-option>
                                                        <mat-option value="Barcode">Barcode</mat-option>
                                                    </mat-select>
                                                </mat-form-field>
                                            </div>
                                           
                                            <div class="col-xl-4 col-lg-4 col-md-6 col-12 mb-0 ">
                                                <button class="me-3" type="submit" mat-raised-button color="primary">
                                                    Search
                                                </button>
                                                <button type="button" mat-raised-button color="warn"
                                                    (click)="BillPendingFromReset()">
                                                    Reset
                                                </button>
                                                <button class=" ms-3" mat-raised-button color="primary"
                                                    printTitle="Sale PendingProduct Report {{this.shopLists}}"
                                                    printSectionId="productPendingtype" ngxPrint
                                                    styleSheetFile="../../../assets/pdf.css">
                                                    <i class="far fa-file-pdf "
                                                        style="color: #ffffff;font-size: 22px;cursor: pointer;"> </i>
                                                </button>
                                            </div>
                                        </div>
                                    </form>
                                    <!-- Purchase Detailed list -->
                                    <div class="body p-2">
                                        <div id="productPendingtype" class="col-sm-12" style="overflow: auto; height: 450px;">
                                            <table class="table table-striped table-hover table-sm table-bordered"
                                                style="border: 2px solid #fff !important;" id="salePendingExcel">
                                                <thead>
                                                    <tr class="text-center" style="white-space: normal;">
                                                        <th>S.No</th>
                                                        <th>InvoiceDate</th>
                                                        <th>DeliveryDate</th>
                                                        <th>InvoiceNo</th>
                                                        <th>Customer Name</th>
                                                        <th>MobileNo</th>
                                                        <th>ProductType Name</th>
                                                        <th>Option</th>
                                                        <th>HSNCode</th>
                                                        <th>Product Name</th>
                                                        <th>Unit Price</th>
                                                        <th>Quantity</th>
                                                        <th>Discount Amount</th>
                                                        <th>Sub Total</th>
                                                        <th>GST Type</th>
                                                        <th>GST%</th>
                                                        <th>GST Amount</th>
                                                        <th style="display: none;"> CGST%</th>
                                                        <th style="display: none;"> CGSTAmt</th>
                                                        <th style="display: none;"> SGST%</th>
                                                        <th style="display: none;"> SGSTAmt</th>
                                                        <th style="display: none;"> IGST%</th>
                                                        <th style="display: none;"> IGSTAmt</th>
                                                        <th>Grand Total</th>
                                                        <th>Barcode</th>
                                                        <th>Product Status</th>
                                                        <th>Cust_GSTNo</th>
                                                        <th>Status</th>
                                                    </tr>
                                                    <tr class="totolRow"
                                                        *ngIf="this.pendingtotalQty != null && this.pendingtotalQty != '' ">
                                                        <td>
                                                            <i class="fa fa-file-excel-o excel" title="ExportAsXLSX"
                                                                aria-hidden="true" type="button"
                                                                (click)="exportAsXLSXPending()">
                                                            </i>

                                                        </td>
                                                        <td></td>
                                                        <td></td>
                                                        <td></td>
                                                        <td></td>
                                                        <td></td>
                                                        <td></td>
                                                        <td></td>
                                                        <td></td>
                                                        <td></td>
                                                        <td></td>
                                                        <td>{{this.pendingtotalQty}}</td>
                                                        <td>{{this.pendingtotalDiscount}}</td>
                                                        <td>{{this.pendingtotalUnitPrice}}</td>
                                                        <td></td>
                                                        <td></td>
                                                        <td (click)="openModalPending(content5)">
                                                            {{this.pendingtotalGstAmount}}</td>
                                                        <td style="display: none;"></td>
                                                        <td style="display: none;"></td>
                                                        <td style="display: none;"></td>
                                                        <td style="display: none;"></td>
                                                        <td style="display: none;"></td>
                                                        <td style="display: none;"></td>
                                                        <td>{{this.pendingtotalAmount}}</td>
                                                        <td></td>
                                                        <td></td>
                                                        <td></td>
                                                        <td></td>
                                                    </tr>
                                                </thead>
                                                <tbody class="text-center">
                                                    <tr *ngFor=" let t of pendingList; let i = index ">
                                                        <td [ngClass]="{'my_class': t.PaymentStatus === 'Unpaid'}">
                                                            {{pendingList.length-i }} </td>
                                                        <td [ngClass]="{'my_class': t.PaymentStatus === 'Unpaid'}">
                                                            {{dateFormat(t.BillDate)}}</td>
                                                        <td [ngClass]="{'my_class': t.PaymentStatus === 'Unpaid'}">
                                                            {{dateFormat(t.DeliveryDate)}}</td>
                                                        <td [ngClass]="{'my_class': t.PaymentStatus === 'Unpaid'}">
                                                            {{t.BillInvoiceNo}}</td>
                                                        <td [ngClass]="{'my_class': t.PaymentStatus === 'Unpaid'}">
                                                            {{t.CustomerName}}</td>
                                                        <td [ngClass]="{'my_class': t.PaymentStatus === 'Unpaid'}">
                                                            {{t.CustomerMoblieNo1}}</td>
                                                        <td [ngClass]="{'my_class': t.PaymentStatus === 'Unpaid'}">
                                                            {{t.ProductTypeName}}</td>
                                                        <td [ngClass]="{'my_class': t.PaymentStatus === 'Unpaid'}">{{
                                                            (t.Optionsss !== 'null')? t.Optionsss: '-'}}</td>
                                                        <td [ngClass]="{'my_class': t.PaymentStatus === 'Unpaid'}">
                                                            {{t.HSNCode}}</td>
                                                        <td [ngClass]="{'my_class': t.PaymentStatus === 'Unpaid'}">
                                                            {{t.ProductName}}</td>
                                                        <td [ngClass]="{'my_class': t.PaymentStatus === 'Unpaid'}">
                                                            {{t.UnitPrice }}</td>
                                                        <td [ngClass]="{'my_class': t.PaymentStatus === 'Unpaid'}">
                                                            {{t.Quantity }}</td>
                                                        <td [ngClass]="{'my_class': t.PaymentStatus === 'Unpaid'}">
                                                            {{t.DiscountAmount }}</td>
                                                        <td [ngClass]="{'my_class': t.PaymentStatus === 'Unpaid'}">
                                                            {{t.SubTotal }}</td>
                                                        <td [ngClass]="{'my_class': t.PaymentStatus === 'Unpaid'}">
                                                            {{t.GSTType}}</td>
                                                        <td [ngClass]="{'my_class': t.PaymentStatus === 'Unpaid'}">
                                                            {{t.GSTPercentage}}</td>
                                                        <td [ngClass]="{'my_class': t.PaymentStatus === 'Unpaid'}">
                                                            {{t.GSTAmount }}</td>
                                                        <td style="display: none;"
                                                            [ngClass]="{'my_class': t.PaymentStatus === 'Unpaid'}"><span
                                                                *ngIf="t.GSTType === 'CGST-SGST'"> {{t.GSTPercentage/2}}
                                                            </span></td>
                                                        <td style="display: none;"
                                                            [ngClass]="{'my_class': t.PaymentStatus === 'Unpaid'}"><span
                                                                *ngIf="t.GSTType === 'CGST-SGST'"> {{t.GSTAmount/2}}
                                                            </span></td>
                                                        <td style="display: none;"
                                                            [ngClass]="{'my_class': t.PaymentStatus === 'Unpaid'}">
                                                            <span *ngIf="t.GSTType === 'CGST-SGST'">
                                                                {{t.GSTPercentage/2}} </span>
                                                        </td>
                                                        <td style="display: none;"
                                                            [ngClass]="{'my_class': t.PaymentStatus === 'Unpaid'}"><span
                                                                *ngIf="t.GSTType === 'CGST-SGST'"> {{t.GSTAmount/2}}
                                                            </span></td>
                                                        <td style="display: none;"
                                                            [ngClass]="{'my_class': t.PaymentStatus === 'Unpaid'}">
                                                            <span
                                                                *ngIf="t.GSTType === 'IGST'">{{t.GSTPercentage}}</span>
                                                        </td>
                                                        <td style="display: none;"
                                                            [ngClass]="{'my_class': t.PaymentStatus === 'Unpaid'}">
                                                            <span *ngIf="t.GSTType === 'IGST'">{{t.GSTAmount }}</span>
                                                        </td>
                                                        <td [ngClass]="{'my_class': t.PaymentStatus === 'Unpaid'}">
                                                            {{t.TotalAmount }}</td>
                                                        <td [ngClass]="{'my_class': t.PaymentStatus === 'Unpaid'}">
                                                            {{t.Barcode}}</td>
                                                        <td *ngIf="t.ProductStatus === 1"
                                                            [ngClass]="{'my_class': t.PaymentStatus === 'Unpaid'}">
                                                            Deliverd </td>
                                                        <td *ngIf="t.ProductStatus === 0"
                                                            [ngClass]="{'my_class': t.PaymentStatus === 'Unpaid'}">
                                                            pending </td>
                                                      
                                                        <td [ngClass]="{'my_class': t.PaymentStatus === 'Unpaid'}">
                                                            {{t.GSTNo}}</td>
                                                        <td [ngClass]="{'my_class': t.PaymentStatus === 'Unpaid'}">
                                                            <span *ngIf="t.Manual === 1">Manual</span>
                                                            <span *ngIf="t.PreOrder === 1">PreOrder</span>
                                                            <span
                                                                *ngIf="t.PreOrder === 0 && t.Manual === 0">Stock</span>
                                                        </td>
                                                     
                                                    </tr>
                                                </tbody>
                                            </table>
                                        </div>
                                    </div>
                                </div>
                            </mat-tab>
                        </mat-tab-group>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- model Master-->
<ng-template #content3 role="document" let-modal>
    <div class="modal-header" style="height: 50px;">
        <h3 class="modal-title header pt-2" id="exampleModalLabel">GST Amount List</h3>
        <button type="button" class="btn-close" aria-hidden="true" (click)="modal.dismiss('Cross click')"></button>
    </div>
    <div class="modal-body">
        <div class="row">
            <table class="table table-striped table-hover table-sm table-bordered"
                style="border: 2px solid #fff !important;">
                <thead>
                    <tr>
                        <th>GSTType</th>
                        <th>GSTAmount</th>
                    </tr>
                </thead>
                <tbody>
                    <tr class="text-center" *ngFor="let gst of gstMaster let i = index;">
                        <td>{{gst.GSTType}}</td>
                        <td>{{gst.Amount.toFixed(2) }}</td>
                    </tr>
                </tbody>
                <tfoot class="text-center">
                    <tr>
                        <th style="color: red; font-weight: 600;">Total Amt</th>
                        <th style="color: red; font-weight: 600;">{{this.totalGstAmount }}</th>
                    </tr>
                </tfoot>
            </table>
        </div>
    </div>
</ng-template>

<!-- model detail-->
<ng-template #content role="document" let-modal>
    <div class="modal-header" style="height: 50px;">
        <h3 class="modal-title header pt-2" id="exampleModalLabel">GST Amount List</h3>
        <button type="button" class="btn-close" aria-hidden="true" (click)="modal.dismiss('Cross click')"></button>
    </div>
    <div class="modal-body">
        <div class="row">
            <table class="table table-striped table-hover table-sm table-bordered"
                style="border: 2px solid #fff !important;">
                <thead>
                    <tr>
                        <th>GSTType</th>
                        <th>GSTAmount</th>
                    </tr>
                </thead>
                <tbody>
                    <tr class="text-center" *ngFor="let gst of gstdetails let i = index;">
                        <td>{{gst.GSTType}}</td>
                        <td>{{gst.Amount.toFixed(2) }}</td>
                    </tr>
                </tbody>
                <tfoot class="text-center">
                    <tr>
                        <th style="color: red; font-weight: 600;">Total Amt</th>
                        <th style="color: red; font-weight: 600;">{{this.DetailtotalGstAmount }}</th>
                    </tr>
                </tfoot>
            </table>
        </div>
    </div>
</ng-template>

<!--Service model -->
<ng-template #content1 role="document" let-modal>
    <div class="modal-header" style="height: 50px;">
        <h3 class="modal-title header pt-2" id="exampleModalLabel">GST Amount List</h3>
        <button type="button" class="btn-close" aria-hidden="true" (click)="modal.dismiss('Cross click')"></button>
    </div>
    <div class="modal-body">
        <div class="row">
            <table class="table table-striped table-hover table-sm table-bordered"
                style="border: 2px solid #fff !important;">
                <thead>
                    <tr>
                        <th>GSTType</th>
                        <th>GSTAmount</th>
                    </tr>
                </thead>
                <tbody>
                    <tr class="text-center" *ngFor="let gst of gstService let i = index;">
                        <td>{{gst.GSTType}}</td>
                        <td>{{gst.Amount.toFixed(2) }}</td>
                    </tr>
                </tbody>
                <tfoot class="text-center">
                    <tr>
                        <th style="color: red; font-weight: 600;">Total Amt</th>
                        <th style="color: red; font-weight: 600;">{{this.ServicetotalGstAmount }}</th>
                    </tr>
                </tfoot>
            </table>
        </div>
    </div>
</ng-template>

<!--cancel model -->
<ng-template #content4 role="document" let-modal>
    <div class="modal-header" style="height: 50px;">
        <h3 class="modal-title header pt-2" id="exampleModalLabel">GST Amount List</h3>
        <button type="button" class="btn-close" aria-hidden="true" (click)="modal.dismiss('Cross click')"></button>
    </div>
    <div class="modal-body">
        <div class="row">
            <table class="table table-striped table-hover table-sm table-bordered"
                style="border: 2px solid #fff !important;">
                <thead>
                    <tr>
                        <th>GSTType</th>
                        <th>GSTAmount</th>
                    </tr>
                </thead>
                <tbody>
                    <tr class="text-center" *ngFor="let gst of gstcancels let i = index;">
                        <td>{{gst.GSTType}}</td>
                        <td>{{gst.Amount.toFixed(2) }}</td>
                    </tr>
                </tbody>
                <tfoot class="text-center">
                    <tr>
                        <th style="color: red; font-weight: 600;">Total Amt</th>
                        <th style="color: red; font-weight: 600;">{{this.totalGstAmount }}</th>
                    </tr>
                </tfoot>
            </table>
        </div>
    </div>
</ng-template>

<!--pending model -->
<ng-template #content5 role="document" let-modal>
    <div class="modal-header" style="height: 50px;">
        <h3 class="modal-title header pt-2" id="exampleModalLabel">GST Amount List</h3>
        <button type="button" class="btn-close" aria-hidden="true" (click)="modal.dismiss('Cross click')"></button>
    </div>
    <div class="modal-body">
        <div class="row">
            <table class="table table-striped table-hover table-sm table-bordered"
                style="border: 2px solid #fff !important;">
                <thead>
                    <tr>
                        <th>GSTType</th>
                        <th>GSTAmount</th>
                    </tr>
                </thead>
                <tbody>
                    <tr class="text-center" *ngFor="let gst of gstpending let i = index;">
                        <td>{{gst.GSTType}}</td>
                        <td>{{gst.Amount.toFixed(2) }}</td>
                    </tr>
                </tbody>
                <tfoot class="text-center">
                    <tr>
                        <th style="color: red; font-weight: 600;">Total Amt</th>
                        <th style="color: red; font-weight: 600;">{{this.totalGstAmount }}</th>
                    </tr>
                </tfoot>
            </table>
        </div>
    </div>
</ng-template>